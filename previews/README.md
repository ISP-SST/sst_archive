# Previews

## Overview

This app is responsible for ingesting and providing database models for preview images, animations, plots and data for
interactive plots. As of right now the following previews are supported:

* Image previews
  * Thumbnail preview
  * Full-size preview
* Video previews
* r<sup>0</sup> plots
  * JSON data for interactive plots
* Spectral line profile plots
  * Preview plots
  * JSON data for interactive plots

## Ingestion

### Image Previews

Image previews are generated by looking at the generated image that is generated side by side with the exported FITS
data cube by the SSTRED pipeline. The image is ingested in two sizes - a smaller thumbnail and a full size preview.

### Video Previews

Video previews are also based on the video files produced by the SSTRED pipeline during the export step. Videos are
just converted to a web friendly format (`.webm`).

### r<sup>0</sup> Plots

r<sup>0</sup> plot data is generated by looking at the `VAR-EXT-ATMOS_R0` FITS HDU in the ingested cube. A blob of JSON
data is then produced and stored in the database. This blob is later read by the JavaScript that renders the interactive
plot in the UI.

### Spectral Line Profile Plots

Two pieces of data are generated during the ingestion:

 * A small Spectral Line Profile preview in SVG format that can be displayed in search results
 * A JSON blob with input data for the interactive JavaScript plot. This blob is stored in the same way as the
   r<sup>0</sup> plots 

