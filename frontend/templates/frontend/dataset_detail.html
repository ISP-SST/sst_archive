{% extends "frontend/base.html" %}

{% load selection_tags %}
{% load pagination_controls %}

{% block title %}SST Archive - {{ dataset.name }}{% endblock %}

{% block content %}

{% if dataset %}

    <h2>Observations in dataset '{{ dataset.name }}'</h2>

    <table class="table" style="table-layout: fixed">
        <thead class="thead-light">
        <tr>
            <th scope="col" style="width: 5em">Select</th>
            <th scope="col">Observation</th>
            <th scope="col">Obs. Date</th>
            <th scope="col"  style="width: 7em">File size</th>
            <th scope="col"  style="width: 5em">Download</th>
        </tr>
        </thead>
        <tbody>

        {% if page_obj %}
            {% for metadata in page_obj %}
            <tr>
                <th>{% show_selection_control dataset.name metadata.oid False %}</th>
                <th><a href="{% url 'metadata_detail' dataset.name metadata.oid %}">{{ metadata.oid }}</a></th>
                <td scope="row">{{ metadata.date }}</td>
                <td scope="row">{{ metadata.data_location.file_size|filesizeformat }}</td>
                <td><a class="download-symbol bi bi-download" href="{% url 'download_data_cube' dataset.name metadata.oid %}"></a></td>
            </tr>
            {% endfor %}

        {% else %}

        <tr colspan="0">
            <td>No observations registered for this dataset.</td>
        </tr>

        {% endif %}

        </tbody>
    </table>

    {% pagination_controls paginator page_obj %}

{% else %}
    <p>Specified dataset does not exist!</p>
{% endif %}

{% endblock %}
