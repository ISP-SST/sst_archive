{% extends "frontend/base.html" %}

{% load selection_tags %}
{% load pagination_controls %}
{% load static %}

{% block title %}- Datasets{% endblock %}

{% block content %}
    <h2>Showing {{ paginator.count }} search results</h2>

    <table class="table" style="table-layout: fixed">
        <thead class=".thead-light">
        <tr>
            <th scope="col" style="width: 12em">Preview</th>
            <th scope="col" style="width: 7em">Instrument</th>
            <th scope="col" style="width: 12em">Observation Date (Began)</th>
            {% for column_name in additional_column_names %}
                <th scope="col" class="text-center" style="width: 4em">{{ column_name }}</th>
            {% endfor %}
            <th scope="col" style="width: 6em">Data Size</th>
            <th scope="col" style="width: 5em">Download</th>
        </tr>
        </thead>
        <tbody>
{% if page_obj %}
    {% for metadata in page_obj %}
        <tr>
            <td scope="row">
                <a href="{% url 'file_detail' metadata.filename %}">
                {% if metadata.thumbnail %}
                <img style="width: 50%" src="{% static metadata.thumbnail %}"/>
                {% else %}
                {{ metadata.oid }}
                {% endif %}
                </a>
            </td>
            <td scope="row">{{ metadata.instrument }}</td>
            <td scope="row">{{ metadata.date }}</td>
            {% for value in metadata.additional_values %}
            <td scope="row" class="text-center">{{ value }}</td>
            {% endfor %}
            <td scope="row" class="text-center">{{ metadata.file_size|filesizeformat }}</td>
            <td scope="row" class="text-center"><a class="download-symbol bi bi-download" href="{% url 'download_data_cube' metadata.filename %}"></a></td>
        </tr>
    {% endfor %}
{% else %}
    <tr>
        <td colspan="6">Search yielded no results.</td>
    </tr>
{% endif %}
        </tbody>
    </table>

    {% pagination_controls paginator page_obj %}

{% endblock %}
